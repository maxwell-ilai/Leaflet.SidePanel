L.Control.SidePanel=L.Control.extend({includes:L.Evented.prototype,options:{panelPosition:"left",hasTabs:!0,tabsPosition:"top",darkMode:!1,pushControls:!1},initialize:function(t,e){this._panel=L.DomUtil.get(t),L.setOptions(this,e)},addTo:function(t){L.DomUtil.addClass(this._panel,"sidepanel-"+this.options.panelPosition),L.Browser.touch&&L.DomUtil.addClass(this._panel,"leaflet-touch"),this.options.darkMode&&L.DomUtil.addClass(this._panel,"sidepanel-dark"),L.DomEvent.disableScrollPropagation(this._panel),L.DomEvent.disableClickPropagation(this._panel),this.options.hasTabs&&this.initTabs(t,this.options.tabsPosition)},initTabs:function(t,e){"string"==typeof e&&L.DomUtil.addClass(this._panel,"tabs-"+e);let o=this._panel.querySelector(".sidepanel-tabs"),s=o.querySelectorAll(".sidepanel-tab"),i=this._panel.querySelectorAll(".sidepanel-tab-content");s.forEach(function(t){const e=t.querySelector("a.sidebar-tab-link");L.DomUtil.hasClass(e,"active")&&i.forEach(function(t){e.dataset.tabLink===t.dataset.tabContent&&L.DomUtil.addClass(t,"active")}),L.DomEvent.on(e,"click",function(t){if(L.DomEvent.preventDefault(t),!L.DomUtil.hasClass(e,"active")){for(let t=0;t<s.length;t++){let e=s[t].querySelector("a.sidebar-tab-link");L.DomUtil.hasClass(e,"active")&&L.DomUtil.removeClass(e,"active")}L.DomUtil.addClass(e,"active"),i.forEach(function(t){e.dataset.tabLink===t.dataset.tabContent?L.DomUtil.addClass(t,"active"):L.DomUtil.removeClass(t,"active")})}},t)}),this._toggleButton(t)},_toggleButton:function(t){const e=this._panel.querySelector(".sidepanel-toggle-container"),o=e.querySelector(".sidepanel-toggle-button");L.DomEvent.on(o,"click",function(e){let o=!0,s=L.DomUtil.hasClass(this._panel,"opened"),i=L.DomUtil.hasClass(this._panel,"closed");if(s||i?!s&&i?(L.DomUtil.addClass(this._panel,"opened"),L.DomUtil.removeClass(this._panel,"closed")):s&&!i?(o=!1,L.DomUtil.removeClass(this._panel,"opened"),L.DomUtil.addClass(this._panel,"closed")):L.DomUtil.addClass(this._panel,"opened"):L.DomUtil.addClass(this._panel,"opened"),this.options.pushControls){let e=t.getContainer().querySelector(".leaflet-control-container");L.DomUtil.addClass(e,"leaflet-anim-control-container"),o?(L.DomUtil.removeClass(e,this.options.panelPosition+"-closed"),L.DomUtil.addClass(e,this.options.panelPosition+"-opened")):(L.DomUtil.removeClass(e,this.options.panelPosition+"-opened"),L.DomUtil.addClass(e,this.options.panelPosition+"-closed"))}}.bind(this),e)}}),L.control.sidepanel=function(t,e){return new L.Control.SidePanel(t,e)};